<ion-view view-title="Scoreboard">
  <ion-nav-buttons side="secondary">
    <button class="button button-icon button-clear ion-ios-refresh-empty" ng-click="refresh()" ng-class="{ 'ion-ios7-reloading': ajaxing }"></button>
  </ion-nav-buttons>
  <ion-content has-subheader>
    <ion-refresher pulling-text="Pull to refresh..." on-refresh="refresh()"></ion-refresher>
    <div class="subheader">
      <rsa-week-chooser on-choose-week="setWeek(week)" week="week" first-week="1" last-week="16"></rsa-week-chooser>
    </div>
    <div class="last-updated">
      <div ng-show="ajaxing">
        loading...
      </div>
      <div ng-show="blocked">
        hold yer horses there cowboy (1 per {{ settings.refreshRate / 1000 }}sec)
      </div>
      <div ng-hide="blocked || ajaxing || !lastUpdatedAgo">
        <em>updated {{ lastUpdatedAgo }} ago (pull to refresh)</em>
      </div>
    </div>
    <ion-list class="scoreboards">
      <div class="loading-page-content" ng-show="boxScores | none">
        <h3>Loading...</h3>
        <p>
          this can take a little while the first time the page loads
        </p>
      </div>
      <div class="item" ng-repeat="boxScore in boxScores" ui-sref="app.game({ leagueId: leagueId, week: boxScore.week, gameId: boxScore.gameId })">
        <div class="scoreboard">
          <div class="row row-center">
            <div class="col col-2-15 team-image">
              <img ng-src="{{ boxScore.awayTeam.imageUrl }}" width="90%" />
            </div>
            <div class="col col-67 team-name">
              {{ boxScore.awayTeam.team.name }}
            </div>
            <div class="col col-20 number">
              {{ boxScore.awayTeam.summary.totalPoints | toFixed:2 }}
            </div>
          </div>
          <div class="row row-center">
            <div class="col col-2-15 team-image">
              <img ng-src="{{ boxScore.homeTeam.imageUrl }}" width="90%" />
            </div>
            <div class="col col-67 team-name">
              {{ boxScore.homeTeam.team.name }}
            </div>
            <div class="col col-20 number">
              {{ boxScore.homeTeam.summary.totalPoints | toFixed:2 }}
            </div>
          </div>
        </div>
      </div>
    </ion-list>
  </ion-content>
</ion-view>
